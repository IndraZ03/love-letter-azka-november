<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Azka Love Letter November</title>
    <!-- Favicon Love Icon -->
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50,85 C50,85 15,60 15,40 C15,25 28,15 42,15 C50,15 50,20 50,20 C50,20 50,15 58,15 C72,15 85,25 85,40 C85,60 50,85 50,85 Z' fill='%23d66d8e'/></svg>"
    />
    <style>
      /* --- FONTS & PALETTE --- */
      @import url("https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Parisienne&family=Quicksand:wght@300;400;500&family=Great+Vibes&display=swap");

      :root {
        /* Palette: Pastel Pink, Blush Rose, Warm Peach, Soft White, Gold */
        --bg-gradient-start: #ffe6ea;
        --bg-gradient-end: #ffd1d6;
        --primary-pink: #ffadc4;
        --deep-rose: #d66d8e;
        --peach-accent: #ffdab9;
        --text-main: #6b3e4e;
        --gold-accent: #d4af37;
        --gold-shimmer: #f8e58c;
        --paper-bg: #fffbf0;
        --shadow-soft: 0 15px 35px rgba(214, 109, 142, 0.15);

        /* Envelope Specifics */
        --envelope-color: #ffdde1;
        --envelope-flap: #ffc4cb;
        --envelope-shadow: rgba(214, 93, 177, 0.3);
      }

      /* --- RESET --- */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(
          180deg,
          var(--bg-gradient-start),
          var(--bg-gradient-end)
        );
        font-family: "Quicksand", sans-serif;
        color: var(--text-main);
        overflow-x: hidden;
        min-height: 100vh;
        /* HAPUS perspective: 1px; agar position: fixed bekerja dengan benar pada viewport */
      }

      /* --- CANVAS BACKGROUND --- */
      #particle-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        pointer-events: none;
      }

      /* --- INTRO OVERLAY (ENVELOPE) --- */
      #intro-overlay {
        position: fixed;
        inset: 0;
        background: radial-gradient(circle at center, #fff0f5 0%, #ffdde1 100%);
        z-index: 2000;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transition: opacity 1.2s ease, visibility 1.2s;
      }

      .envelope-container {
        position: relative;
        cursor: pointer;
        transition: transform 0.3s ease;
        margin-top: -50px;
      }

      .envelope-container:hover {
        transform: scale(1.05);
      }

      .envelope {
        width: 300px;
        height: 200px;
        background: var(--envelope-color);
        position: relative;
        border-radius: 0 0 10px 10px;
        box-shadow: 0 10px 30px var(--envelope-shadow);
        display: flex;
        justify-content: center;
        overflow: visible;
      }

      /* The folded parts of the envelope body */
      .envelope::before {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 100px 0 100px 150px;
        border-color: transparent transparent transparent #ffaab9;
        opacity: 0.5;
        border-radius: 0 0 0 10px;
        pointer-events: none;
      }

      .envelope::after {
        content: "";
        position: absolute;
        bottom: 0;
        right: 0;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 100px 150px 100px 0;
        border-color: transparent #ff97a8 transparent transparent;
        opacity: 0.5;
        border-radius: 0 0 10px 0;
        pointer-events: none;
      }

      /* The bottom fold */
      .envelope-bottom {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 0 150px 110px 150px;
        border-color: transparent transparent #ff8fa3 transparent;
        z-index: 2;
        opacity: 0.3;
        border-radius: 0 0 10px 10px;
        pointer-events: none;
      }

      /* The Flap */
      .flap {
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 110px 150px 0 150px;
        border-color: var(--envelope-flap) transparent transparent transparent;
        transform-origin: top;
        transition: transform 0.8s ease-in-out, z-index 0.6s;
        z-index: 5;
        border-radius: 5px 5px 0 0;
      }

      /* Open state for flap */
      .envelope.open .flap {
        transform: rotateX(180deg);
        z-index: 1;
      }

      /* Heart Seal */
      .seal {
        position: absolute;
        top: -55px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 2.5rem;
        color: var(--deep-rose);
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        z-index: 6;
        transition: opacity 0.5s ease;
      }

      .envelope.open .seal {
        opacity: 0;
      }

      .click-hint {
        margin-top: 3rem;
        font-family: "Cinzel Decorative", cursive;
        color: var(--deep-rose);
        font-size: 1.2rem;
        letter-spacing: 2px;
        animation: pulse 2s infinite;
      }

      /* --- MAIN LAYOUT --- */
      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 4rem 2rem;
        position: relative;
        z-index: 10;
      }

      header {
        text-align: center;
        margin-bottom: 4rem;
        opacity: 0; /* Animated in via JS */
        transform: translateY(20px);
        transition: all 1.5s ease;
      }

      header.visible {
        opacity: 1;
        transform: translateY(0);
      }

      h1 {
        font-family: "Parisienne", cursive;
        font-size: 4.5rem;
        background: linear-gradient(
          to right,
          var(--deep-rose),
          var(--gold-accent)
        );
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.05);
        margin-bottom: 0.5rem;
      }

      /* --- FLOATING GIRLFRIEND PHOTOS (FIXED POSITION) --- */
      .floating-photo-container {
        /* FIXED: Membuat elemen tetap di layar saat di-scroll */
        position: fixed !important;
        z-index: 9999; /* Pastikan Z-Index sangat tinggi */
        width: 180px;
        height: 180px;
        border-radius: 50%;
        overflow: hidden;
        border: 4px solid var(--gold-accent);
        box-shadow: 0 0 30px rgba(212, 175, 55, 0.5),
          inset 0 0 20px rgba(255, 255, 255, 0.3);
        animation: float-space 7s ease-in-out infinite;
        pointer-events: none;
        will-change: transform;
        /* Tambahkan backface-visibility untuk performa rendering */
        backface-visibility: hidden;
        -webkit-font-smoothing: subpixel-antialiased;
      }

      .floating-photo-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* Posisi Kanan Atas */
      .photo-top-right {
        top: 60px;
        right: 40px;
        animation-delay: 0s;
      }

      /* Posisi Kiri Bawah */
      .photo-bottom-left {
        bottom: 40px;
        left: 40px;
        animation-delay: 3.5s;
      }

      @keyframes float-space {
        0% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(3deg);
        }
        100% {
          transform: translateY(0) rotate(0deg);
        }
      }

      /* --- THE SCROLL (Love Letter) --- */
      .scroll-wrapper {
        position: relative;
        width: 100%;
        max-width: 700px;
        margin: 0 auto 6rem;
        perspective: 1000px;
      }

      /* Top Roll of the Scroll */
      .scroll-top {
        height: 40px;
        background: linear-gradient(to right, #e6c8a0, #f8e58c, #e6c8a0);
        border-radius: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        position: relative;
        z-index: 20;
      }

      /* The Paper Body */
      .scroll-body {
        background: var(--paper-bg);
        /* Subtle texture */
        background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d66d8e' fill-opacity='0.03' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
        width: 90%;
        margin: -20px auto 0; /* Tuck under top roll */
        padding: 3rem 4rem;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
        border-left: 2px solid rgba(212, 175, 55, 0.3);
        border-right: 2px solid rgba(212, 175, 55, 0.3);

        /* Unroll Animation Setup */
        height: 0;
        opacity: 0;
        overflow: hidden;
        transform-origin: top;
        transition: height 2.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 1s ease;
      }

      .scroll-body.unrolled {
        height: auto; /* Fallback */
        min-height: 500px; /* Adjust based on content */
        opacity: 1;
      }

      /* Bottom Roll */
      .scroll-bottom {
        height: 40px;
        width: 100%;
        background: linear-gradient(to right, #e6c8a0, #f8e58c, #e6c8a0);
        border-radius: 20px;
        box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 20;
        margin-top: -20px; /* Tuck over bottom of paper */

        /* Animation for moving down */
        transform: translateY(-100%);
        opacity: 0;
        transition: transform 2.5s cubic-bezier(0.25, 1, 0.5, 1),
          opacity 0.5s ease;
      }

      .scroll-wrapper.active .scroll-bottom {
        transform: translateY(0);
        opacity: 1;
      }

      /* Letter Content Typography */
      .letter-text {
        font-family: "Quicksand", sans-serif;
        font-size: 1.25rem;
        line-height: 2;
        color: var(--text-main);
      }

      .letter-text p {
        min-height: 1.5em; /* Prevent jump */
        margin-bottom: 1.5rem;
      }

      /* Typewriter Cursor */
      .cursor {
        display: inline-block;
        width: 2px;
        height: 1.2em;
        background-color: var(--deep-rose);
        animation: blink 0.8s infinite;
        vertical-align: middle;
      }

      /* --- MINI GAME SECTION --- */
      .game-section {
        padding: 4rem 0;
        text-align: center;
        position: relative;
        margin-bottom: 4rem;
      }

      .game-title {
        font-family: "Parisienne", cursive;
        font-size: 2.5rem;
        color: var(--deep-rose);
        margin-bottom: 1.5rem;
      }

      .game-container {
        width: 100%;
        max-width: 600px;
        height: 400px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(5px);
        border: 2px solid var(--primary-pink);
        border-radius: 20px;
        position: relative;
        overflow: hidden;
        cursor: crosshair;
        box-shadow: 0 10px 30px rgba(214, 109, 142, 0.1);
      }

      .game-ui {
        position: absolute;
        top: 20px;
        left: 0;
        width: 100%;
        padding: 0 30px;
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 10;
        pointer-events: none; /* Let clicks pass through to container */
      }

      .love-meter-label {
        font-weight: bold;
        color: var(--deep-rose);
        margin-bottom: 5px;
      }

      .love-meter-box {
        width: 100%;
        max-width: 300px;
        height: 20px;
        background: #fff;
        border-radius: 10px;
        border: 2px solid var(--deep-rose);
        overflow: hidden;
      }

      .love-meter-fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(
          90deg,
          var(--primary-pink),
          var(--deep-rose)
        );
        transition: width 0.3s cubic-bezier(0.25, 1, 0.5, 1);
      }

      .game-start-btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: var(--deep-rose);
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 50px;
        font-family: "Quicksand", sans-serif;
        font-weight: bold;
        font-size: 1.1rem;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(214, 109, 142, 0.4);
        z-index: 20;
        transition: all 0.3s ease;
      }

      .game-start-btn:hover {
        transform: translate(-50%, -50%) scale(1.1);
        background: #e07aa0;
      }

      .falling-heart {
        position: absolute;
        font-size: 2rem;
        cursor: pointer;
        user-select: none;
        z-index: 5;
        animation: fall linear forwards;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      @keyframes fall {
        to {
          transform: translateY(450px) rotate(360deg);
        }
      }

      /* Reward Modal */
      .reward-overlay {
        position: fixed;
        inset: 0;
        background: rgba(107, 62, 78, 0.4);
        z-index: 2999;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s;
        backdrop-filter: blur(3px);
      }
      .reward-overlay.active {
        opacity: 1;
        pointer-events: auto;
      }

      .reward-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.8);
        background: #fff;
        padding: 3rem;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        border: 4px solid var(--gold-accent);
        text-align: center;
        z-index: 3000;
        opacity: 0;
        pointer-events: none;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        max-width: 90%;
        width: 450px;
      }

      .reward-modal.active {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
        pointer-events: auto;
      }

      .reward-quote {
        font-family: "Parisienne", cursive;
        font-size: 2rem;
        color: var(--deep-rose);
        line-height: 1.4;
        margin-bottom: 2rem;
      }

      .close-reward-btn {
        background: transparent;
        border: 1px solid var(--deep-rose);
        color: var(--deep-rose);
        padding: 8px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-family: "Quicksand", sans-serif;
        transition: all 0.3s;
      }
      .close-reward-btn:hover {
        background: var(--deep-rose);
        color: white;
      }

      /* --- PARALLAX PHOTO COLLAGE --- */
      .collage-section {
        position: relative;
        padding: 4rem 0;
        perspective: 1000px;
        text-align: center;
      }

      .collage-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 3rem;
        padding: 2rem;
      }

      .photo-card {
        background: #fff;
        padding: 15px;
        border-radius: 4px;
        box-shadow: var(--shadow-soft);
        transition: transform 0.4s ease, box-shadow 0.4s ease;
        position: relative;
        opacity: 0; /* Fade in on scroll */
        transform: translateY(50px);
        width: 300px;
        max-width: 100%;
      }

      .photo-card.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .photo-card:hover {
        z-index: 50;
        box-shadow: 0 20px 50px rgba(214, 109, 142, 0.3);
      }

      .photo-frame {
        overflow: hidden;
        position: relative;
      }

      .photo-frame img {
        width: 100%;
        height: 350px;
        object-fit: cover;
        display: block;
        transition: transform 1.5s ease;
      }

      .photo-card:hover img {
        transform: scale(1.1);
      }

      .caption {
        margin-top: 15px;
        font-family: "Parisienne", cursive;
        font-size: 1.4rem;
        color: var(--deep-rose);
        text-align: center;
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.5s ease;
      }

      .photo-card:hover .caption {
        opacity: 1;
        transform: translateY(0);
      }

      /* --- BUTTONS --- */
      .reveal-btn {
        display: block;
        margin: 0 auto;
        background: linear-gradient(
          135deg,
          var(--deep-rose),
          var(--primary-pink)
        );
        color: white;
        border: none;
        padding: 1rem 3rem;
        border-radius: 50px;
        font-family: "Quicksand", sans-serif;
        font-weight: bold;
        font-size: 1.1rem;
        cursor: pointer;
        box-shadow: 0 10px 25px rgba(214, 109, 142, 0.4);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .reveal-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 30px rgba(214, 109, 142, 0.6);
        animation: pulse-soft 1s infinite;
      }

      /* --- BONUS GAME STYLES --- */
      .memory-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
        max-width: 400px;
        margin: 20px auto;
      }

      .memory-card {
        aspect-ratio: 1;
        background: var(--primary-pink);
        border-radius: 10px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: transparent;
        transition: all 0.3s;
        user-select: none;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .memory-card.flipped,
      .memory-card.matched {
        background: white;
        color: var(--deep-rose);
        border: 2px solid var(--deep-rose);
        transform: rotateY(180deg);
      }

      .memory-card.matched {
        background: #d4f7d4; /* Hijau muda */
        border-color: #2e8b57;
        pointer-events: none;
      }

      /* --- ANIMATIONS --- */
      @keyframes pulse {
        0%,
        100% {
          opacity: 0.5;
          transform: scale(1);
        }
        50% {
          opacity: 1;
          transform: scale(1.05);
        }
      }

      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes blink {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0;
        }
      }

      @keyframes pulse-soft {
        0% {
          box-shadow: 0 0 0 0 rgba(214, 109, 142, 0.7);
        }
        70% {
          box-shadow: 0 0 0 15px rgba(214, 109, 142, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(214, 109, 142, 0);
        }
      }

      /* Media Queries */
      @media (max-width: 768px) {
        h1 {
          font-size: 3rem;
        }
        .scroll-body {
          padding: 2rem;
        }
        .game-container {
          height: 350px;
        }

        .envelope {
          width: 260px;
          height: 170px;
        }
        .envelope::before {
          border-width: 85px 0 85px 130px;
        }
        .envelope::after {
          border-width: 85px 130px 85px 0;
        }
        .envelope-bottom {
          border-width: 0 130px 95px 130px;
        }
        .flap {
          border-width: 95px 130px 0 130px;
        }

        /* Mobile adjustment for celestial photos */
        .floating-photo-container {
          width: 90px; /* Ukuran lebih kecil di HP agar tidak menutupi konten */
          height: 90px;
          border-width: 2px;
        }
        .photo-top-right {
          top: 20px;
          right: 15px;
        }
        .photo-bottom-left {
          bottom: 20px;
          left: 15px;
        }

        .memory-grid {
          grid-template-columns: repeat(3, 1fr); /* 3 kolom di HP */
          gap: 10px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Particle Canvas -->
    <canvas id="particle-canvas"></canvas>

    <!-- INTRO ENVELOPE -->
    <div id="intro-overlay">
      <div class="envelope-container" id="envelope">
        <div class="envelope">
          <div class="flap">
            <div class="seal">‚ô•</div>
          </div>
          <div class="envelope-bottom"></div>
        </div>
      </div>
      <p class="click-hint">Untuk Azkayangku, klik buat buka</p>
    </div>

    <div class="container" id="main-content" style="display: none">
      <!-- 
        FLOATING GIRLFRIEND PHOTOS (Fixed Position)
        Disimpan di dalam #main-content agar muncul BERSAMAAN setelah amplop dibuka,
        tetapi menggunakan css 'position: fixed' agar tetap menempel di layar saat discroll.
      -->

      <!-- KANAN ATAS -->
      <div class="floating-photo-container photo-top-right">
        <!-- GANTI URL DI BAWAH INI DENGAN FOTO PACAR ANDA -->
        <img src="1765700507867.png" alt="Foto Pacar Mengambang 1" />
      </div>

      <!-- KIRI BAWAH -->
      <div class="floating-photo-container photo-bottom-left">
        <!-- GANTI URL DI BAWAH INI DENGAN FOTO PACAR ANDA -->
        <img src="1765700489815.png" alt="Foto Pacar Mengambang 2" />
      </div>

      <header>
        <h1>Love Letter November</h1>
        <p
          style="letter-spacing: 2px; color: var(--deep-rose); margin-top: 10px"
        >
          Untuk Salsabila Azka Ramadhani
        </p>
      </header>

      <!-- The Scroll -->
      <div class="scroll-wrapper" id="scroll-wrapper">
        <div class="scroll-top"></div>

        <div class="scroll-body" id="scroll-body">
          <div class="letter-text" id="letter-content">
            <!-- Text will be injected by Typewriter JS -->
          </div>
        </div>

        <div class="scroll-bottom"></div>
      </div>

      <div style="text-align: center; margin-bottom: 5rem">
        <button class="reveal-btn" id="read-letter-btn">Baca Surat</button>
      </div>

      <!-- Mini Game Section -->
      <section class="game-section">
        <h2 class="game-title">Maen Game Dulu Yank</h2>
        <p style="margin-bottom: 2rem; color: var(--text-main)">
          Tembak-tembakin ajh
        </p>

        <div class="game-container" id="game-area">
          <div class="game-ui">
            <div class="love-meter-label">Meteran Cinta</div>
            <div class="love-meter-box">
              <div class="love-meter-fill" id="love-meter"></div>
            </div>
          </div>

          <button class="game-start-btn" id="start-game-btn">Mainin</button>
        </div>
      </section>

      <!-- Parallax Gallery -->
      <section class="collage-section">
        <h2
          style="
            font-family: 'Parisienne', cursive;
            font-size: 3rem;
            color: var(--deep-rose);
            text-align: center;
            margin-bottom: 3rem;
          "
        >
          Memories of November AzkaIndra
        </h2>

        <div class="collage-grid">
          <!-- Photo 1 -->
          <div class="photo-card">
            <div class="photo-frame">
              <img src="IMG_6943.jpg" alt="Love" />
            </div>
            <div class="caption">Date di Kanaraaa</div>
          </div>

          <!-- Photo 2 -->
          <div class="photo-card">
            <div class="photo-frame">
              <img src="IMG_6778.jpg" alt="Maem bakmi dan bakpao telur bebek" />
            </div>
            <div class="caption">
              Maem bakmiii sama bakpao telur asin wenakk
            </div>
          </div>

          <!-- Photo 3 -->
          <div class="photo-card">
            <div class="photo-frame">
              <img src="IMG_7003.jpg" alt="Love" />
            </div>
            <div class="caption">Maemmm di laobannnn</div>
          </div>
        </div>
      </section>

      <!-- BUTTON BONUS GAME -->
      <div style="text-align: center; margin: 4rem 0">
        <button id="bonus-game-btn" class="reveal-btn">
          Pencet ini kalo cayang sm aq
        </button>
      </div>
    </div>

    <!-- Hidden Source Text for Typewriter -->
    <div id="source-text" style="display: none">
      <p>ayangggkuuuuu azcutee cantikk,</p>
      <p>
        sampe detik love letter ini dikirim, aku masi sayanggg bangettttt sama
        kamuuu. gapernah ada rasa menyesal selama aku jadi pacar kamuuuuu. kamu
        bener bener ngubah hidup aku jadi lebih hidup jadi lebih lebih hepiiii.
        jauh. apa yang aku rasain sekarang jauh lebih baik daripada dulu.
        harusnya aku deketin kamu dari lama. ternyata punya pacar kaya kamu
        semenyenangkan ituu. gapeduli kamu udah ngambek berapa kaliii. tapi
        waktu liatttt kamu rasanyaaaaa aku sayanggggg banget sama kamuu‚ù£Ô∏è‚ù£Ô∏è‚ù£Ô∏è üíñ
      </p>

      <p>
        sayangku, love letter ini baru dikirim di desember jadi aku revisi
        karena ternyata aku udah pengumuman penempatan. dan sudah beberapa kali
        lagi aku revisi revisi. termasuk revisi waktu aku udah di balikpapan ky
        skripsi ajh. maap yaahh baru kukirim desember. aku bener2 belum ada ide.
        üíå
      </p>

      <p>
        hubungan kita di november bener bener nyadarin aku kalo aku harus mulai
        ke kehidupan yang serius. aku udah ngenalin kamu ke ortu aku kamu juga
        udah ngenalin aku ke ortu kamu. yang dulunya kamu bener-bener bimbang
        banget buat ngenalin. yg dulunya kamu takut ngasi tau ortu kamu sampe
        nangis karena bapak kamu bilang mintanya sesama dokter. ternyata di
        november kita bisa lewatin itu semua. kamu bisa kenalin aku ke ortu
        kamu. ternyata hal yang ditakutin ga kejadian. ortu kamu juga cukup
        welcome si kalo menurut aku. apa yang kita takutkan ternyata ga
        semenakutkan ituuu. aku seneng bisa ngobrol sama bapak ibu kamuuu. next
        time semoga ak ngobrol buat nglamar kamu chuaksssü•¥ü•¥ü•¥ü•¥ üíû
      </p>

      <p>
        Di november kemarin, kita ketemu di pemalang. jujur aku selalu
        overexcited kalo udah sekota sama kamuu. mintanya ketemu teruss sampe
        malah takut sendiri ortu kamu risih. apalagi waktu dibilangin jangan
        sore sore nanti ujannüò≠üò≠üò≠üò≠. aku ovt jir takutnya kemarin itu ak
        ngepulangin kamu kesorean tapi emang kesorean sih. tapi kan kita jarang
        ketemuuüò≠üò≠üò≠üò≠ harus manfaatin waktu sebaik baik baik baik baikkkk
        mungkinnnn. üíó
      </p>

      <p>
        jujur pemberkasan cpns aku juga ga keurus wkwkwk aku bener bener tes
        kesehatan di hari terakhir banget 1 hari kesempatan. kalo dokternya
        gaada gabisa di hari lain. tapi ternyata juga aku bisa ngelewatin
        pemberkasan ituuuu. kita masi bisa jalan jalan. makan bakmii wenakkk.
        photobox, main ps, gitaran di pantai (walaupun senarnya putus sich
        (bukan salah kamu salah gitar)). 1 per 1 wishlist kita terwujudddd
        hihihiiii senenggh bangettttt aku jadi makin sayangggg bamgett sama
        kamuuuuuuu. ü•∞
      </p>

      <p>
        makin hari kamu makin cantik sayang. apalagi kalo udah pas vece tingkah
        lakunya gemes gemes gituu. aku sampe gatega bilang penempatan aku dimana
        krna kamu lagi hepi hepinyaaa. aku pengen liat kamu senyum terus. ya
        memang aku kesel kalo didiemin kamuu. soalnya aku merasa kurang gitu
        kalo gadapet perhatian kamuu. tapi gapapaaa. aku gamasalahh kamu kayak
        gituu. tolonggg kamu boleh cuekin akuu asal hubungan kita tetap ada
        yahhü•∫ü•∫ü•∫ beb aku gatau. seburuk apa nanti keadaan aku kalo kita
        udahan. gapapa kamu jawab apa adanyaaaa aku tetep akan jadi bucin kamuuu
        seterus terus terusnyaaaaaaaaa. (ditulis after pengumuman penempatan) üíì
      </p>

      <p>
        Sayanggkuuu,,ü•∫ü•∫ü•∫ü•∫ gapapa ya kita kepisah duluuuuu. nanti kalo udah
        nikah puas puasinnnn pelukan barengggg puas puasin jajan barenggg puas
        puasin makan barengggggg, puas puasin ciuman barengggggggggg. kita
        gabisa ngontrol keadaan kita sekarang gimanaaaa. tapi kita bisa
        rencanain buat masa depan. kita bisa usahain masa depann. yang penting
        kita saling cintaaaa kita saling percayaaaa kalo di ujungnya kita bakal
        hidup sama sama. kita bakal nikahh hidup bareng. üíç
      </p>

      <p>
        tolong percaya sama aku. sampai detik ini aku masi gaterima buat
        penempatan di sini. aku selalu ngusahain buat pindahh.
        senyaman-nyamannya lingkungan aku di sini, sebaik-baiknya pegawai sinii.
        tetep. ü§ç
      </p>

      <p>
        Sayang, kita udah ngenalin ke masing masing orang tua kita. akuuu juga
        bener benerr pengen seriusss sama kamuu pengen hidup bareng sama kamuuu.
        sejak aku mulai kerja aku udah mulai mikirin ini nanti nikah gimana
        yaaa. waktu aku kuliah dulu rasanya aku lebih boros bangett. waktu kerja
        aku mulai sadar kalo waktu nikah itu makin deketttt. dan aku emang harus
        siapin dari sekarangg gabisa dadakan. üíñ
      </p>

      <p>
        aku minta tolongg kasi aku waktu buat nabung duluuu. yaaa buat
        semuaaanyaa stabil dulu. jadi target nikah kita jadi realistis. aku
        rencananya kalo uang gaji bmkg bakal kutabung sama buat cicil mahar
        emas. nanti aku kasi tau ke kamu kok berkalaaa. tabungan aku udah
        berapaaa. üíû
      </p>

      <p>
        nah kalo ngedate mungkin aku bakal ngambil uang dari side job ya
        sayangggg. dari ngajar lefranttt ak ada rencana buat ngojek juga kalo
        ada waktu sih. jadi sementara aku izin nabung dulu ya sayangggg. aku
        selalu mikirin kamu kapanpun kokkk. aku janjiii selagi kamu masi cinta
        ke akuu. aku bakal usahain semuanyaaaa. balik lagi, aku pengen rencanain
        nikah kita dari sekarang. di ujung love letter ini ayokk kita rencanain
        bareng bareng yukk. üíë
      </p>

      <p>My heart belongs to you<br />indra üíï</p>
    </div>

    <!-- Game Reward Modal (Catch Love) -->
    <div class="reward-overlay" id="reward-overlay"></div>
    <div class="reward-modal" id="reward-modal">
      <div
        style="font-size: 3rem; color: var(--gold-accent); margin-bottom: 1rem"
      >
        ‚ô•
      </div>
      <p class="reward-quote">
        "Aku janjii akan jadiii bucin kamuu seterusssnyaaaa dan akan terus
        berusahaaa buat pindah ke jawaaaa dan kemudian tujuan ak nikah sama
        salsabila azka ramadhani."
      </p>
      <button class="close-reward-btn" id="close-reward">Lopyu</button>
    </div>

    <!-- Bonus Game Modal (Memory) -->
    <div class="reward-overlay" id="bonus-overlay"></div>
    <div class="reward-modal" id="bonus-modal" style="width: 500px">
      <h2 style="color: var(--deep-rose); font-family: 'Parisienne', cursive">
        Cocokkan Hati Azka Indra
      </h2>
      <p>Cocokin bebeeeee</p>
      <div class="memory-grid" id="memory-grid">
        <!-- Cards will be injected here -->
      </div>
      <button
        class="close-reward-btn"
        id="close-bonus"
        style="margin-top: 10px"
      >
        Tutup
      </button>
    </div>

    <!-- Memory Game Win Modal -->
    <div class="reward-overlay" id="memory-win-overlay"></div>
    <div class="reward-modal" id="memory-win-modal">
      <div
        style="
          font-size: 4rem;
          color: var(--gold-accent);
          margin-bottom: 1rem;
          animation: pulse 1.5s infinite;
        "
      >
        üéâ‚ù§Ô∏èüéâ
      </div>
      <h2
        style="
          color: var(--deep-rose);
          font-family: 'Parisienne', cursive;
          font-size: 2.5rem;
          margin-bottom: 1rem;
        "
      >
        Yeyeye Menanggg!
      </h2>
      <p class="reward-quote">Kamu selalu Menang di Hati aq! ‚ù§Ô∏è</p>
      <p
        style="
          color: var(--text-main);
          font-size: 1rem;
          margin: 1.5rem 0;
          line-height: 1.6;
        "
      >
        Mau kan kamu sama aku sampai nikah dan seterus-terusnyaaa????
      </p>
      <div
        style="
          display: flex;
          gap: 1rem;
          justify-content: center;
          flex-wrap: wrap;
        "
      >
        <button class="close-reward-btn" id="close-memory-win">
          Mauuuu bingitttttttt!!!! ‚ù§Ô∏è
        </button>
        <button
          class="close-reward-btn"
          id="wa-redirect"
          style="background: var(--deep-rose); color: white; border: none"
        >
          y mw üíå
        </button>
      </div>
    </div>

    <script>
      // --- CONFIGURATION ---
      const PARTICLE_COUNT = 70;
      const TYPEWRITER_SPEED = 40;
      let isMainContentActive = false; // Flag to track state

      // --- MUSIC CONFIGURATION ---
      // GANTI URL DI BAWAH INI DENGAN LINK JUKEHOST ANDA
      const music = new Audio(
        "https://audio.jukehost.co.uk/QBRUEUvYX47DCROZ8xbT5IRbGQnIkTY7"
      );
      music.loop = true; // Musik akan looping
      music.volume = 1; // Volume 50% (bisa disesuaikan 0.0 - 1.0)

      // --- 1. PARTICLE SYSTEM ---
      const canvas = document.getElementById("particle-canvas");
      const ctx = canvas.getContext("2d");
      let width, height;
      let particles = [];

      function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resize);
      resize();

      class Particle {
        constructor() {
          this.init();
        }

        init() {
          this.x = Math.random() * width;
          this.y = height + Math.random() * 100;
          this.type = Math.random() > 0.5 ? "heart" : "sparkle";

          if (this.type === "heart") {
            // Aesthetic sizing: Small, elegant, dainty.
            this.size = Math.random() * 8 + 4;
          } else {
            this.size = Math.random() * 3 + 1;
          }

          this.speedY = Math.random() * 0.8 + 0.2; // Slower, more gentle
          this.speedX = (Math.random() - 0.5) * 0.5;
          this.opacity = Math.random() * 0.5 + 0.2;
          this.color =
            this.type === "heart"
              ? `rgba(214, 109, 142, ${this.opacity})`
              : `rgba(212, 175, 55, ${this.opacity})`;
          this.rotation = Math.random() * 360;
          this.rotationSpeed = (Math.random() - 0.5) * 0.02; // Slower rotation
          this.wobble = Math.random() * Math.PI * 2;
        }

        draw() {
          ctx.save();
          ctx.translate(this.x, this.y);
          ctx.rotate(this.rotation);
          ctx.fillStyle = this.color;

          if (this.type === "heart") {
            // Perfect Symmetrical Heart Formula
            ctx.beginPath();
            const s = this.size;
            // Move to top center dip
            ctx.moveTo(0, -s / 4);
            // Right curve to bottom tip
            ctx.bezierCurveTo(s / 2, -s / 1.5, s, s / 3, 0, s);
            // Left curve back to top center
            ctx.bezierCurveTo(-s, s / 3, -s / 2, -s / 1.5, 0, -s / 4);
            ctx.fill();
          } else {
            // Diamond Sparkle
            ctx.beginPath();
            ctx.moveTo(0, -this.size);
            ctx.lineTo(this.size, 0);
            ctx.lineTo(0, this.size);
            ctx.lineTo(-this.size, 0);
            ctx.fill();
          }
          ctx.restore();
        }

        update() {
          this.x += Math.sin(this.wobble) * 0.5; // Gentle sway
          this.wobble += 0.02;
          this.y -= this.speedY;
          this.opacity -= 0.0005; // Fade very slowly
          this.rotation += this.rotationSpeed;

          if (this.opacity <= 0 || this.y < -50) this.init();
        }
      }

      function initParticles() {
        particles = [];
        for (let i = 0; i < PARTICLE_COUNT; i++) {
          particles.push(new Particle());
        }
      }

      function animateParticles() {
        ctx.clearRect(0, 0, width, height);
        particles.forEach((p) => {
          p.update();
          p.draw();
        });
        requestAnimationFrame(animateParticles);
      }
      initParticles();
      animateParticles();

      // --- 2. INTRO & TRANSITIONS ---
      const envelope = document.getElementById("envelope");
      const introOverlay = document.getElementById("intro-overlay");
      const mainContent = document.getElementById("main-content");
      const header = document.querySelector("header");

      envelope.addEventListener("click", () => {
        // 1. Open Animation
        envelope.querySelector(".envelope").classList.toggle("open");
        createClickBurst(window.innerWidth / 2, window.innerHeight / 2);

        // 2. Play Music
        music.play().catch((error) => {
          // Handle autoplay policy - jika browser block autoplay
          console.log("Autoplay blocked, user interaction required:", error);
        });

        // 3. Transition
        setTimeout(() => {
          introOverlay.style.opacity = 0;

          setTimeout(() => {
            introOverlay.style.display = "none";
            mainContent.style.display = "block";

            isMainContentActive = true;
            // Reset particles
            initParticles();

            // Trigger Entrance Animations
            setTimeout(() => {
              header.classList.add("visible");
              window.addEventListener("scroll", handleParallax);
            }, 100);
          }, 1000);
        }, 800);
      });

      // --- 3. SCROLL UNROLL & TYPEWRITER (FIXED) ---
      const unrollBtn = document.getElementById("read-letter-btn");
      const scrollWrapper = document.getElementById("scroll-wrapper");
      const scrollBody = document.getElementById("scroll-body");
      const letterContent = document.getElementById("letter-content");
      const sourceText = document.getElementById("source-text").innerHTML;

      let isTyping = false;

      unrollBtn.addEventListener("click", () => {
        unrollBtn.style.opacity = 0;
        setTimeout(() => (unrollBtn.style.display = "none"), 500);

        scrollWrapper.classList.add("active");
        scrollBody.classList.add("unrolled");

        setTimeout(() => {
          if (!isTyping) typeWriterEffect(letterContent, sourceText);
        }, 1000);
      });

      function typeWriterEffect(element, htmlContent) {
        isTyping = true;
        element.innerHTML = '<span class="cursor"></span>'; // Start with cursor only

        // Regex to match HTML tags OR single characters (including whitespace/newlines)
        // Matches: <...tag...> OR . (any char) OR [\n\r]
        const tokens = htmlContent.match(/<[^>]+>|[^<]/g);

        let tokenIndex = 0;

        function type() {
          if (tokenIndex < tokens.length) {
            const token = tokens[tokenIndex];
            const cursor = element.querySelector(".cursor");

            if (token.startsWith("<")) {
              // Insert HTML tag instantly (invisible action)
              cursor.insertAdjacentHTML("beforebegin", token);
              tokenIndex++;
              // Immediate recursion to process next token without delay if it's a tag
              type();
            } else {
              // Type regular text character
              cursor.insertAdjacentText("beforebegin", token);
              tokenIndex++;
              // Random typing delay for realism
              const delay = Math.random() * 20 + 20;
              setTimeout(type, delay);
            }
          }
        }
        type();
      }

      // --- 4. MINI GAME LOGIC ---
      const gameArea = document.getElementById("game-area");
      const startGameBtn = document.getElementById("start-game-btn");
      const loveMeter = document.getElementById("love-meter");
      const rewardOverlay = document.getElementById("reward-overlay");
      const rewardModal = document.getElementById("reward-modal");
      const closeRewardBtn = document.getElementById("close-reward");

      let gameScore = 0;
      let gameInterval;
      const TARGET_SCORE = 10;
      let isGameRunning = false;

      startGameBtn.addEventListener("click", startGame);

      function startGame() {
        if (isGameRunning) return;
        isGameRunning = true;
        gameScore = 0;
        updateMeter();
        startGameBtn.style.display = "none";

        gameInterval = setInterval(spawnGameHeart, 800);
      }

      function spawnGameHeart() {
        const heart = document.createElement("div");
        heart.classList.add("falling-heart");
        heart.innerText = ["‚ù§Ô∏è", "üíñ", "üíó", "üíï"][
          Math.floor(Math.random() * 4)
        ];

        const maxLeft = gameArea.clientWidth - 40;
        heart.style.left = Math.random() * maxLeft + "px";
        heart.style.top = "-50px";

        const duration = Math.random() * 2 + 3;
        heart.style.animationDuration = duration + "s";

        heart.addEventListener("mousedown", () => catchHeart(heart));
        heart.addEventListener("animationend", () => heart.remove());

        gameArea.appendChild(heart);
      }

      function catchHeart(element) {
        element.style.transform = "scale(1.5)";
        element.style.opacity = "0";

        gameScore++;
        updateMeter();
        createClickBurst(
          element.getBoundingClientRect().left,
          element.getBoundingClientRect().top
        );

        setTimeout(() => element.remove(), 200);

        if (gameScore >= TARGET_SCORE) {
          winGame();
        }
      }

      function updateMeter() {
        const percent = (gameScore / TARGET_SCORE) * 100;
        loveMeter.style.width = percent + "%";
      }

      function winGame() {
        clearInterval(gameInterval);
        isGameRunning = false;

        const hearts = document.querySelectorAll(".falling-heart");
        hearts.forEach((h) => h.remove());

        setTimeout(() => {
          rewardOverlay.classList.add("active");
          rewardModal.classList.add("active");
        }, 500);
      }

      closeRewardBtn.addEventListener("click", () => {
        rewardOverlay.classList.remove("active");
        rewardModal.classList.remove("active");
        startGameBtn.innerText = "Main Lagi";
        startGameBtn.style.display = "block";
      });

      // --- 5. PARALLAX EFFECT ---
      const photoCards = document.querySelectorAll(".photo-card");

      function handleParallax() {
        photoCards.forEach((card) => {
          const rect = card.getBoundingClientRect();
          if (rect.top < window.innerHeight - 50) {
            card.classList.add("visible");
          }
        });
      }

      // --- 6. BONUS MEMORY GAME ---
      const bonusBtn = document.getElementById("bonus-game-btn");
      const bonusOverlay = document.getElementById("bonus-overlay");
      const bonusModal = document.getElementById("bonus-modal");
      const closeBonusBtn = document.getElementById("close-bonus");
      const memoryGrid = document.getElementById("memory-grid");

      const emojis = ["‚ù§Ô∏è", "üåπ", "üíç", "üß∏", "üíå", "üç´"];
      let memoryCards = [...emojis, ...emojis]; // Pairs
      let flippedCards = [];
      let matchedPairs = 0;

      bonusBtn.addEventListener("click", () => {
        bonusOverlay.classList.add("active");
        bonusModal.classList.add("active");
        initMemoryGame();
      });

      closeBonusBtn.addEventListener("click", () => {
        bonusOverlay.classList.remove("active");
        bonusModal.classList.remove("active");
      });

      function initMemoryGame() {
        memoryGrid.innerHTML = "";
        flippedCards = [];
        matchedPairs = 0;

        // Shuffle
        memoryCards.sort(() => 0.5 - Math.random());

        memoryCards.forEach((emoji) => {
          const card = document.createElement("div");
          card.classList.add("memory-card");
          card.dataset.value = emoji;
          card.innerText = emoji; // Actually hidden by CSS color transparent

          card.addEventListener("click", flipCard);
          memoryGrid.appendChild(card);
        });
      }

      function flipCard() {
        if (flippedCards.length < 2 && !this.classList.contains("flipped")) {
          this.classList.add("flipped");
          flippedCards.push(this);

          if (flippedCards.length === 2) {
            checkMatch();
          }
        }
      }

      function checkMatch() {
        const [card1, card2] = flippedCards;

        if (card1.dataset.value === card2.dataset.value) {
          card1.classList.add("matched");
          card2.classList.add("matched");
          flippedCards = [];
          matchedPairs++;

          if (matchedPairs === emojis.length) {
            setTimeout(() => {
              showMemoryWinModal();
            }, 500);
          }
        } else {
          setTimeout(() => {
            card1.classList.remove("flipped");
            card2.classList.remove("flipped");
            flippedCards = [];
          }, 1000);
        }
      }

      // Memory Game Win Modal Functions
      const memoryWinOverlay = document.getElementById("memory-win-overlay");
      const memoryWinModal = document.getElementById("memory-win-modal");
      const closeMemoryWinBtn = document.getElementById("close-memory-win");
      const waRedirectBtn = document.getElementById("wa-redirect");

      function showMemoryWinModal() {
        memoryWinOverlay.classList.add("active");
        memoryWinModal.classList.add("active");
      }

      function hideMemoryWinModal() {
        memoryWinOverlay.classList.remove("active");
        memoryWinModal.classList.remove("active");
      }

      closeMemoryWinBtn.addEventListener("click", () => {
        window.location.href =
          "https://docs.google.com/spreadsheets/d/1UIhlPaC_TT0Q5g7e-xizr_IceF-0boOrZT-aSyQAC5U/edit?gid=905358578#gid=905358578";
      });

      waRedirectBtn.addEventListener("click", () => {
        window.location.href =
          "https://docs.google.com/spreadsheets/d/1UIhlPaC_TT0Q5g7e-xizr_IceF-0boOrZT-aSyQAC5U/edit?gid=905358578#gid=905358578";
      });

      // Close modal when clicking overlay
      memoryWinOverlay.addEventListener("click", hideMemoryWinModal);

      // --- 7. INTERACTION EFFECTS ---
      function createClickBurst(x, y) {
        for (let i = 0; i < 20; i++) {
          const part = document.createElement("div");
          part.style.position = "fixed";
          part.style.left = x + "px";
          part.style.top = y + "px";
          part.style.width = "8px";
          part.style.height = "8px";
          part.style.backgroundColor = "var(--gold-accent)";
          part.style.borderRadius = "50%";
          part.style.pointerEvents = "none";
          part.style.zIndex = "9999";
          document.body.appendChild(part);

          const angle = Math.random() * Math.PI * 2;
          const dist = Math.random() * 100 + 50;

          const anim = part.animate(
            [
              { transform: "translate(0,0) scale(1)", opacity: 1 },
              {
                transform: `translate(${Math.cos(angle) * dist}px, ${
                  Math.sin(angle) * dist
                }px) scale(0)`,
                opacity: 0,
              },
            ],
            {
              duration: 1000,
              easing: "cubic-bezier(0, .9, .57, 1)",
            }
          );

          anim.onfinish = () => part.remove();
        }
      }

      document.addEventListener("click", (e) => {
        if (
          !e.target.closest(".game-container") &&
          !e.target.closest(".envelope-container") &&
          !e.target.closest(".memory-card")
        ) {
          createClickBurst(e.clientX, e.clientY);
        }
      });
    </script>
  </body>
</html>
